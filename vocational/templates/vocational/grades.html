
  {% load static %}
<div>
    <table class="table table-sm table-striped table-bordered" style="width: auto">
        <thead>
            <tr>
                <th>Quarter</th><th>Student</th><th>Department</th><th>Instructor</th>
                <th>Type</th><th>Grade</th><th>Value</th><th>Student Discussed</th> <th>VC Validated</th>
                <th>Date</th><th></th>
            </tr>
        </thead>
        <tbody>
            {% for g in grades %}
                <tr>
                    <td>{{ g.quarter.get_name_display }}
                    <br> <div class="span80">{{ g.quarter.school_year }}</div>
                    </td>
                    <td>{{ g.student }}</td>
                    <td>{{ g.department }}</td><td>{{ g.instructor.last_name }}, {{ g.instructor.first_name }}</td>
                    <td>{{ g.get_type_display }}</td><td>{{ g.percent }}%</td><td>{{ g.value }}</td>
                    <td>{{ g.student_discussed|default_if_none:"Not yet" }}</td>
                    <td>{{ g.vc_validated|default_if_none:"Not yet" }}</td>
                    <td>{{ g.created_at }}</td>
                    <td> <input type="button" class="detailbtn btn btn-sm btn-dark span80 noprint" value ="Show Details" id={{ g.id }}> </td>
                </tr>
                <td colspan="11">
                    <div class="card card-body" id="details{{ g.id }}" style="display: none;">
                        {% if g.type == "S" %}
                        <table class="table-sm span80 table-nostriped table-bordered" style="white-space: nowrap; width: 1%;">
                            <tbody>
                                {% for i in g.indicatorsummativegrade_set.all %}
                                    <tr>
                                        <th>{{ i.indicator.name }}</th>
                                        <td>{{ i.value }}</td>
                                        <td>{{ i.comment|default_if_none:"" }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% else %}
                         <table class="table-sm w-auto span80 table-nostriped table-bordered">
                            <thead>
                                <tr>
                                    {% for i in g.indicatorformativegrade_set.all %}
                                        <th>{{ i.indicator.name }}</th>
                                    {%  endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    {% for i in g.indicatorformativegrade_set.all %}
                                        <td>{{ i.value }}</td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        {{ g.commendation }}
                                    </td></tr>
                                <tr>
                                     <td colspan="10">
                                        {{ g.recommendation }}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        {% endif %}
                    </div>
                </td>
            {% endfor %}
        </tbody>
    </table>

</div>

    <script>
        $('.detailbtn').on("click", function() {
                     var value = $(this).attr('value');
                     var id=$(this).attr('id');
                     if(value == "Show Details") {
                         $("#details"+id).show();
                         $(this).attr('value',"Hide Details"); }
                     if(value == "Hide Details") {
                         $("#details"+id).hide();
                         $(this).attr('value',"Show Details");}
         });
    </script>
